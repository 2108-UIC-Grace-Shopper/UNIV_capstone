(this.webpackJsonpuniv_capstone=this.webpackJsonpuniv_capstone||[]).push([[0],{62:function(e,t,a){"use strict";a.r(t);var n=a(14),c=a(5),r=a.n(c),s=a(11),i=a(4),o=a(10),l=a.n(o),j=a(1),d=a(30),u=a.n(d),b=a(12),p=a(2),m=a(0),O=function(e){var t=e.token,a=e.setToken,n=e.setOrderId;return Object(m.jsxs)("div",{className:"dropdown",children:[Object(m.jsx)("button",{className:"dropbtn",children:"Dropdown"}),Object(m.jsx)("div",{className:"dropdown-content",children:Object(m.jsxs)("ul",{id:"navigation",children:[Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"",className:"material-icons md-48 md-dark",children:"home"})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{href:"",target:"_blank",className:"material-icons md-48 md-dark",children:"account_circle"})}),t?Object(m.jsx)("li",{className:"logout",onClick:function(e){e.preventDefault(),a(""),localStorage.removeItem("token"),n("")},children:"logout"}):Object(m.jsx)("li",{className:"material-icons md-48 md-dark",children:Object(m.jsx)(b.b,{to:"/login",children:"login"})}),Object(m.jsx)("li",{className:"material-icons md-48 md-dark",children:Object(m.jsx)(b.b,{to:"/products",children:"store"})})]})})]})},h=function(e){var t=e.setToken,a=Object(j.useState)(""),n=Object(i.a)(a,2),c=n[0],o=n[1],d=Object(j.useState)(""),u=Object(i.a)(d,2),p=u[0],O=u[1];function h(){return(h=Object(s.a)(r.a.mark((function a(){var n,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={username:c,password:p},a.prev=1,a.next=4,l.a.post("/api/users/login",n);case 4:s=a.sent,console.log("loginResponse",s),t(s.data.token),localStorage.setItem("token",s.data.token),e.history.push("/products"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log("ERROR-login",a.t0),alert("There was an issue with your login attempt");case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))).apply(this,arguments)}return Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsxs)("form",{id:"login-form",onSubmit:function(e){e.preventDefault(),function(){h.apply(this,arguments)}()},children:[Object(m.jsx)("label",{className:"username",children:Object(m.jsx)("p",{children:"Username"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Username",name:"uname",value:c,onChange:function(e){o(e.target.value)},required:!0}),Object(m.jsx)("label",{className:"password",children:Object(m.jsx)("p",{children:"Password"})}),Object(m.jsx)("input",{type:"password",placeholder:"Enter Password",name:"psw",value:p,onChange:function(e){O(e.target.value)},required:!0}),Object(m.jsx)("button",{type:"submit",children:"Login"}),Object(m.jsx)("p",{children:Object(m.jsx)(b.b,{to:"/register",className:"linkto-styleA",children:"Register"})})]})})})},x=function(){var e=Object(j.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(j.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/products");case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(m.jsx)("div",{children:Object(m.jsx)("main",{children:Object(m.jsxs)("section",{className:"items",children:[Object(m.jsx)("h1",{children:"Look At Our Amazing Products"}),a.map((function(e){return Object(m.jsxs)("div",{className:"item",children:[Object(m.jsxs)("h3",{className:"item-name",children:[Object(m.jsx)("span",{children:e.name}),Object(m.jsx)("i",{className:"add-item material-icons",children:"add_shopping_cart"})]}),Object(m.jsx)("img",{className:"item-image",src:e.image,alt:e.name}),Object(m.jsx)("p",{className:"item-description",children:e.description}),Object(m.jsxs)("p",{className:"fact-line",children:[Object(m.jsx)("span",{className:"fact-name",children:"Price:"}),Object(m.jsx)("span",{children:e.price})]})]},e.id)}))]})})})},f=function(e){var t=e.setToken,a=Object(j.useState)(""),n=Object(i.a)(a,2),c=n[0],o=n[1],d=Object(j.useState)(""),u=Object(i.a)(d,2),b=u[0],p=u[1],O=Object(j.useState)(""),h=Object(i.a)(O,2),x=h[0],f=h[1],v=Object(j.useState)(""),g=Object(i.a)(v,2),k=g[0],w=g[1];function N(){return(N=Object(s.a)(r.a.mark((function a(){var n,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n={username:c,password:b,email:k},a.prev=1,b!==x){a.next=11;break}return a.next=5,l.a.post("/api/users/register",n);case 5:s=a.sent,t(s.data.token),localStorage.setItem("token",s.data.token),e.history.push("/products"),a.next=13;break;case 11:console.log(console.log("ERROR-password mismatch")),alert("Please reconfirm your password.");case 13:a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),console.log("ERROR-registration",a.t0),alert("There was an issue with your registration attempt");case 19:case"end":return a.stop()}}),a,null,[[1,15]])})))).apply(this,arguments)}return Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("form",{id:"register-form",onSubmit:function(e){e.preventDefault(),function(){N.apply(this,arguments)}()},children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("label",{className:"username",children:Object(m.jsx)("p",{children:"Username"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Username",name:"uname",value:c,onChange:function(e){o(e.target.value)},required:!0}),Object(m.jsx)("label",{className:"password",children:Object(m.jsx)("p",{children:"Password"})}),Object(m.jsx)("input",{type:"password",placeholder:"Enter Password",name:"psw",value:b,onChange:function(e){p(e.target.value)},required:!0}),Object(m.jsx)("label",{className:"email",children:Object(m.jsx)("p",{children:"Confirm Password"})}),Object(m.jsx)("input",{type:"password",placeholder:"Enter Password",name:"psw",value:x,onChange:function(e){f(e.target.value)},required:!0}),Object(m.jsx)("label",{className:"email",children:Object(m.jsx)("p",{children:"Email"})}),Object(m.jsx)("input",{type:"email",placeholder:"Enter Email",name:"email",value:k,onChange:function(e){w(e.target.value)},required:!0}),Object(m.jsx)("button",{type:"submit",children:"Register"})]})})})})},v=function(e){e.token;var t=e.orderId,a=(e.setOrderId,Object(j.useState)([])),n=Object(i.a)(a,2),c=n[0],o=n[1];Object(j.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("---start to load data---"),e.next=3,l.a.get("/api/products/order/".concat(t));case 3:a=e.sent,o(a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t?e():t||o([])}),[t]),console.log("orderProducts: ",c);var d=0;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Welcome to the Cart!"}),Object(m.jsx)("div",{className:"cart-containter",children:c.map((function(e){return d+=Number(e.price*e.quantity),Object(m.jsxs)("section",{className:"item1",children:[Object(m.jsx)("img",{src:e.image,height:"100px",width:"100px"}),Object(m.jsx)("p",{id:"itemDescription",name:"item-1",rows:"6",cols:"50",children:e.name}),Object(m.jsxs)("p",{id:"itemQuantity",children:["Qty: ",e.quantity]}),Object(m.jsxs)("sub",{id:"priceRemove",children:[Object(m.jsxs)("p",{className:"itemPrice",children:["Price: $",e.price*e.quantity]}),Object(m.jsx)("button",{className:"RemoveItem",children:"Remove"})]})]},e.id)}))}),Object(m.jsxs)("nav",{className:"checkout-description",children:[Object(m.jsxs)("p",{className:"totalPrice",children:["Total: $",d]}),Object(m.jsx)("button",{type:"submit",children:"Checkout"})]})]})},g=function(){var e=Object(j.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(j.useState)(""),d=Object(i.a)(o,2),u=(d[0],d[1]),g=Object(j.useState)(""),k=Object(i.a)(g,2),w=k[0],N=k[1];return Object(j.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:return t=e.sent,u(t.data),e.next=6,l.a.get("/api/orders/users/".concat(t.data.id));case 6:a=e.sent,N(a.data[0].id);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();localStorage.getItem("token")?(e(),c(localStorage.getItem("token"))):c("")}),[]),Object(m.jsx)(b.a,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("header",{children:Object(m.jsx)(O,{token:a,setToken:c,setOrderId:N})}),Object(m.jsxs)("div",{children:[Object(m.jsx)(p.a,{path:"/products",render:function(){return Object(m.jsx)(x,{})}}),Object(m.jsx)(p.a,{path:"/login",render:function(e){return Object(m.jsx)(h,Object(n.a)(Object(n.a)({},e),{},{setToken:c}))}}),Object(m.jsx)(p.a,{path:"/register",render:function(e){return Object(m.jsx)(f,Object(n.a)(Object(n.a)({},e),{},{setToken:c}))}}),Object(m.jsx)(p.a,{path:"/cart",render:function(e){return Object(m.jsx)(v,Object(n.a)(Object(n.a)({},e),{},{token:a,orderId:w,setOrderId:N}))}})]})]})})};u.a.render(Object(m.jsx)(g,{}),document.getElementById("app"))}},[[62,1,2]]]);
//# sourceMappingURL=main.0127f62f.chunk.js.map